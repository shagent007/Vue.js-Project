<template lang="pug">
.comand-item
  .teamIcon
    .tooltip Чтобы команда стала активной, необходимо чтобы тренер и наставник заполнили свои тесты
    svg(width='70', height='70', viewBox='0 0 70 70', fill='none', xmlns='http://www.w3.org/2000/svg')
      path(d='M29.8478 25.7218C29.8478 25.7218 28.2173 17.2445 34.3595 17.645C34.3595 17.645 36.2803 16.132 37.8661 18.446C37.8661 18.446 39.72 18.6018 40.3453 21.205V25.1655C40.3453 25.1655 40.9931 25.1433 40.9931 25.4993C40.9931 25.8553 41.2834 29.5933 39.7423 30.3276C39.7423 30.3276 39.1839 31.8406 38.9829 35.0001C38.9829 35.0001 38.4245 37.8481 35.3422 39.1163C35.3422 39.1163 33.131 39.0051 31.5452 35.0446V33.0866C31.5452 33.0866 31.0315 32.3746 30.9869 30.8393C30.9869 30.8393 29.8701 31.2176 29.133 27.4351C28.9767 26.5895 29.1554 25.3435 29.8478 25.7218Z', fill='#D52B1E')
      path(d='M15.8882 28.5475C15.8882 28.5475 14.5928 21.739 19.5065 22.0727C19.5065 22.0727 21.0477 20.8712 22.3208 22.718C22.3208 22.718 23.8172 22.8515 24.3086 24.9207V28.1025C24.3086 28.1025 24.8223 28.1025 24.8223 28.3695C24.8223 28.6365 25.068 31.6625 23.8172 32.241C23.8172 32.241 23.3705 33.4425 23.1919 36.0013C23.1919 36.0013 22.7452 38.2708 20.2659 39.3165C20.2659 39.3165 18.5015 39.2275 17.2283 36.0458V34.4883C17.2283 34.4883 16.804 33.9098 16.7816 32.686C16.7816 32.686 15.8882 32.9753 15.2852 29.9492C15.1958 29.2372 15.3298 28.2582 15.8882 28.5475Z', fill='#D52B1E')
      path(d='M45.3483 27.1235C45.3483 27.1235 44.0529 20.315 48.9667 20.6487C48.9667 20.6487 50.5078 19.4472 51.7809 21.294C51.7809 21.294 53.2774 21.4275 53.7687 23.4967V26.6785C53.7687 26.6785 54.2824 26.6785 54.2824 26.9455C54.2824 27.2347 54.5281 30.2385 53.2774 30.817C53.2774 30.817 52.8307 32.0185 52.652 34.5773C52.652 34.5773 52.2053 36.8468 49.7261 37.8925C49.7261 37.8925 47.9616 37.8035 46.6885 34.6218V33.0643C46.6885 33.0643 46.2641 32.4858 46.2418 31.262C46.2418 31.262 45.3483 31.5512 44.7453 28.5252C44.656 27.8355 44.79 26.8342 45.3483 27.1235Z', fill='#D52B1E')
      path(d='M16.6031 37.1138C16.6031 37.1138 16.8487 40.6738 17.4071 42.3648C17.4071 42.3648 18.2782 42.0088 18.7249 40.9185C18.7249 40.9185 19.3503 41.764 19.2386 42.3203C19.2386 42.3203 18.8366 44.8345 18.3899 49.9743C18.3899 49.9743 12.2477 49.0843 10.1258 48.1276C8.00397 47.1708 9.00906 44.3005 9.74612 42.6318C10.4832 40.963 10.9746 39.9618 13.5208 39.1163C13.8558 38.9828 16.268 37.848 16.6031 37.1138Z', fill='#D52B1E')
      path(d='M53.3891 35.6453C53.3891 35.6453 53.1434 39.2053 52.585 40.8963C52.585 40.8963 51.7139 40.5403 51.2672 39.4501C51.2672 39.4501 50.6418 40.2956 50.7535 40.8518C50.7535 40.8518 51.1555 43.3661 51.6023 48.5058C51.6023 48.5058 57.7444 47.6158 59.8663 46.6591C61.9881 45.7023 60.9831 42.8321 60.246 41.1633C59.5089 39.4946 59.0176 38.4933 56.4713 37.6478C56.1363 37.5143 53.7241 36.3796 53.3891 35.6453Z', fill='#D52B1E')
      path(d='M23.8841 37.2473C23.8841 37.2473 26.2516 41.052 30.7187 36.4685C30.7187 36.4685 31.0984 41.497 32.0141 43.2103C32.0141 43.2103 32.9969 42.0088 33.3989 41.141C33.3989 41.141 34.1807 41.9198 33.935 43.9668C33.6893 46.0138 33.5999 45.4575 32.9746 52.4886C32.9746 52.4886 25.0232 51.6431 22.209 50.0856C19.3947 48.5281 21.3379 45.2573 21.3379 45.2573C21.3379 45.2573 21.5612 44.4785 21.3155 43.099C21.0699 41.7195 21.4272 41.0965 21.7399 40.8073C21.7399 40.8073 22.477 42.8543 23.3704 40.874C23.3704 40.8518 23.5267 38.026 23.8841 37.2473Z', fill='#D52B1E')
      path(d='M46.0851 35.7788C46.0851 35.7788 42.0201 40.2956 40.0099 36.2238C40.0099 36.2238 39.6302 41.2523 38.7145 42.9656C38.7145 42.9656 37.7317 41.7641 37.3297 40.8963C37.3297 40.8963 36.548 41.6751 36.7937 43.7221C37.0394 45.7691 37.1287 45.2128 37.7541 52.2438C37.7541 52.2438 45.4374 51.6431 48.2517 50.0856C51.0659 48.5281 49.3684 45.0126 49.3684 45.0126C49.3684 45.0126 48.3857 42.9656 48.6314 41.6083C48.877 40.2511 48.408 39.8061 48.1176 39.5168C48.1176 39.5168 47.4699 41.8531 46.6659 40.1398C46.6882 40.1176 46.4425 36.5798 46.0851 35.7788Z', fill='#D52B1E')
      path(d='M34.7611 67.24C52.6475 67.24 67.1473 52.7956 67.1473 34.9774C67.1473 17.1593 52.6475 2.71484 34.7611 2.71484C16.8748 2.71484 2.375 17.1593 2.375 34.9774C2.375 52.7956 16.8748 67.24 34.7611 67.24Z', stroke='#D52B1E', stroke-width='4', stroke-miterlimit='10')

  .comand-item__info

    .comand-item__flag
      img.comand-item__flag-image(
        :src="comandFlag"
        height="100%"
      )

    .info

      .info__item
        span.info__item-name Название: 
        span.info__item-data {{ name }}

      .info__item
        span.info__item-name Страна: 
        span.info__item-data 
          span {{ country.name }}
          img(
            :src="country.countryFlag"
            height="15px"
          )

      .info__item
        span.info__item-name Рейтинг: 
        span.info__item-data {{ rating }}

  .about
    .about__name О команде:
    .about__data {{ about }}

  .comand-item__structure.comand-structure

    .comand-structure__title Состав команды:

    .comand-structure__participants
      router-link.comand-structure__item(
        v-for="(participant, index) in comand"
        :key="index"
        to="#"
      )
        comand-item-card(
          v-bind="participant"
        )
    
    .input-groups
      router-link.CreateTest(
        :to="{ name: 'AccountCreateTest',params: {type: 'create'}}"
      )
        span.CreateTest__description Создать тест для команды 
        img(
          src="@/assets/ui/docIconBlue.svg"
          height="100%"
          alt=""
        )
       
      router-link.CreateTest.ChangeTest(
        :to="{ name: 'AccountCreateTest',params: {type: 'edit'}}"
        v-if="isHasTest"
      )
        span.CreateTest__description Редактировать коммандный тест
        img(
          src="@/assets/ui/change-test-black.svg"
          height="100%"
          alt=""
        )
      
      gg-button.button(color="red") Расспустить команду
</template>

<script>
import ComandItemCard from "@/components/pages/ComandItemCard";
import GgButton from "@/components/Base/GgButton";
export default {
  components: {
    ComandItemCard,
    GgButton
  },

  /*
    comand: [{
      flag: String,
      image: String,
      ratingStars: String,
      ratingCount: String,
      type: String, // наставник, тренер, участник
      name: String
    }]
  */

  props: {
    comand: Array, // пояснение выше
    comandFlag: String, // url
    name: String,
    country: {
      name: String,
      countryFlag: String // url
    },
    rating: String,
    about: String
  },
  data() {
    return {
      isHasTest: false
    };
  }
};
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style lang="sass" scoped>

//  /* верхняя часть информации */
.comand-item
  position: relative

// Значок обозначаюший заполненность команды
.teamIcon
  position: absolute
  top: 0
  right: 0
  width: 70px
  height: 70px
  cursor: pointer
  svg
    position: absolute
    top: 0
    right: 0
  .tooltip
    position: absolute
    background-color: $White
    width: 200px
    transform: translate(-50%)
    left: 50%
    text-align: center
    box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.24), 0px 4px 8px rgba(0, 0, 0, 0.16)
    border-radius: 3px
    padding: 0.5rem
    bottom: calc(100% + 1rem)
    opacity: 0
    transition: .7s
    &:after
      content: ""
      position: absolute
      bottom: -2rem
      left: 50%
      transform: translateX(-50%)
      border: 1rem solid transparent
      border-top-color: $White
  &:hover
    .tooltip
      opacity: 1
  @media screen and ( min-width: $TableWidth ) and (max-width: $SmDesktopWidth)
    width: 40px
    height: 40px
    svg
      width: 40px
      height: 40px
  @media screen and ( max-width: 400px )
    width: 50px
    height: 50px
    svg
      width: 50px
      height: 50px

// контейнер информации
.info
  display: flex
  flex-flow: column nowrap
  justify-content: space-between

// флаг
.comand-item__flag
  max-width: 150px
  @media screen and ( min-width: $PhoneWidth )
    width: calc(30% - 1rem)
    margin-right: 1rem
  @media screen and ( min-width: $TableWidth ) and (max-width: $SmDesktopWidth)
    width: calc(40% - 1rem)
  @media screen and ( max-width: 400px )
    width: 60%
  img
    width: 100%
    height: auto

.comand-item__info
  display: flex
  justify-content: space-between
  @media screen and (max-width: $PhoneWidth)
    flex-flow: column wrap

// часть слева
.about__name
  width: 30%
  @media screen and ( min-width: $TableWidth ) and (max-width: $SmDesktopWidth)
    width: 40%
// часть справа
.info, .about__data
  width: 70%


.info
  @media screen and (min-width: $PhoneWidth )
    margin-top: 90px
    width: 70%
  @media screen and ( min-width: $TableWidth ) and (max-width: $SmDesktopWidth)
    margin-top: 40px
    width: 70%
  @media screen and (max-width: $PhoneWidth)
    width: 100%
// строки
.info__item
  display: flex
  justify-content: space-between
  padding-top: .5rem
// настройка строк
.info__item-name, .info__item-data
  padding: 0px !important
  +afs(18px, 16px, 14px)
  @media screen and (max-width: $PhoneWidth)
    padding-top: 15px
    justify-content: flex-end

.info__item-name, .about__name, .comand-structure__title
  color: #828282
  +afs(18px, 16px, 14px)

.info__item-data
  font-weight: bold

// о команде
.about
  margin: 20px 0
  display: flex

  @media screen and (max-width: $PhoneWidth)
    flex-flow: column nowrap

.about__name
  @media screen and (max-width: $PhoneWidth)
    padding-bottom: 15px

.about__data, .about__name
  @media screen and (max-width: $PhoneWidth)
    width: 100%

//  /* контейнер карточек */
.comand-structure__participants
  display: flex
  flex-flow: row wrap

//  /* карточка участника */
.comand-structure__item
  display: block

  color: $Black

  margin: 10px 20px 10px 0
  width: calc( 100% / 4 - 15px ) // хз, почему 15, но так работает

  background: #FFFFFF
  box-shadow: 0px 6px 12px rgba(8, 35, 48, 0.14), 0px 16px 24px rgba(8, 35, 48, 0.08)

  @media screen and (max-width: 1200px)
    width: calc( 100% / 2 - 40px )

  @media screen and (max-width: $TableWidth)
    width: 100%

.comand-structure__item:nth-child(4n + 4)
  margin-right: 0

.comand-structure__item:focus
  box-shadow: none

//  /*  */
.comand-structure__title
  margin: 15px 0

.input-groups
  display: flex
  justify-content: space-between
  align-items: center
  margin-top: 2rem
  @media screen and (max-width: $PhoneWidth)
    flex-direction: column
    align-items: stretch
.CreateTest
  +afs(18px, 17px, 16px)
  font-style: italic
  font-weight: 500
  display: flex
  align-items: flex-end
  margin-right: 1rem
  @media screen and (max-width: $PhoneWidth)
    margin-bottom: 2rem
  &__description
    margin-right: .5rem
    padding-bottom: 3px
    border-bottom: 2px solid $Blue
  &.ChangeTest
    color: $Black
    .CreateTest__description
      border-bottom-color: $Black
.button
  +afs(18px, 17px, 16px)
  display: flex
  align-items: center
</style>
